import { jsx, Flex, Box } from 'theme-ui';
import {
	Appear,
	Boom,
	Center,
	Code,
	Cover,
	Image,
	Notes,
	Primary,
	Secondary,
	SplitWithHeading,
	ThatGuy,
} from './theme';
import { Prism } from 'react-syntax-highlighter';
import TweetEmbed from 'react-tweet-embed';
import Stack from 'stack-styled';
import * as dropdown from './code/dropdown.js';

export { theme } from './theme';

<Cover author="Andrey Okonetchnikov">

# Resilient Component Libraries with React

</Cover>

---

<Primary>

## Why building your own component library?

</Primary>

---

### How are we have been building UIs

1. Get a static mockup from a designer
1. Write HTML markup that represents the mockup
1. Write CSS and connect with HTML using classes
1. "Sprinkle" JavaScript using classes to add interactivity
1. Hand off to a backend developer
1. Replace HTML with PHP, Ruby, Java, ...
1. ...
1. Profit

---

### How are we building UIs with React

1. Get a static mockup from a designer
1. Get data from API endpoint
1. Render data in JSX using HTML
1. Write CSS and connect with JSX using `className`
1. ...
1. Profit

---

<Secondary>

> We are still drawing **static mockups** and writing **HTML & CSS**

</Secondary>

---

<Secondary>

# What's the problem with static mockups?

</Secondary>

---

<Image src="./assets/dribbble1.png" size="contain" />

---

<Image src="./assets/dribbble2.png" size="contain" />

---

## Static mockups...

- not covering all possible states
- not covering all possible resolutions
- losing lots of design knowledge during ~~translation~~ hand-off
- are static!

---

<Boom>

## Mockups are _static_

## Applications are _dynamic_

<ThatGuy />

</Boom>

---

<Secondary>

## What's the problem with CSS?

</Secondary>

---

<Boom>

# CSS is hard ü§Ø

</Boom>

---

<Center>
	<TweetEmbed id="1038073603311448064" />
	<ThatGuy />
</Center>

---

<Center>

# CSS is the source of inconsistent UIs

</Center>

---

<Image src="./assets/doors.jpg" />

---

## Sources of inconsistent UIs

- Color & Typography ‚Üí Custom CSS
- Spacing & Layout ‚Üí Custom CSS

---

<SplitWithHeading>

## Custom CSS

```css
.description {
	margin-bottom: 20px;
	font-size: 16px;
	color: #c9b8b9;
}
```

```css
.count {
	margin-left: 0.75em;
	font-size: 14px;
	opacity: 0.5;
	color: #fc9;
}
```

</SplitWithHeading>

---

<Image src="./assets/too-many-buttons.jpg" size="contain" />

---

<Image src="./assets/too-many-buttons-2.jpg" size="contain" />

---

<Image src="./assets/text.png" size="contain" />

---

<Boom>

# CSS is too expressive üë©‚Äçüé®

</Boom>

---

<Primary>

# Design tokens

</Primary>

---

<Center>
	<Image src="./assets/dls-foundation.png" size="contain" />
</Center>

---

<Center>
	<a href="https://marvelapp.com/styleguide/design/color-scheme">
		<img src="../assets/design-tokens-colors.png" alt="Design tokens: colors" />
	</a>
</Center>

---

<Center>
	<a href="https://cloudflare.github.io/cf-ui/#cf-design-gradients">
		<img
			src="../assets/design-tokens-gradients.png"
			alt="Design tokens: gradients"
		/>
	</a>
</Center>

---

<Center>
	<a href="https://vueds.com/example/#!/Design%20Tokens">
		<img
			src="../assets/design-tokens-fonts-spacing.png"
			alt="Design tokens: fonts and spacing"
		/>
	</a>
</Center>

---

<Center>
	<a href="https://www.lightningdesignsystem.com/design-tokens/">
		<img src="../assets/design-tokens-misc.png" alt="Design tokens" />
	</a>
</Center>

---

<Boom>

> Design tokens are everything you use more than once in your styles

</Boom>

---

<SplitWithHeading>

## Custom properties as design tokens

```css
.description {
	margin-bottom: var(--spacing--3);
	font-size: var(--fontSize--base);
	color: var(--color-grey);
}
```

```css
.count {
	margin-left: var(--spacing--2);
	font-size: var(--fontSize--small);
	color: var(--color--light);
}
```

</SplitWithHeading>

---

<SplitWithHeading>

## Bad token combinations

<div style={{width: "40vw"}}>

```css
.cant__read_this {
	font-size: var(--fontSize--x-small);
	color: var(--color--light);
}
```

</div>

<div style={{ width: '40vw' }}>
	<div style={{ fontSize: '2vmax', color: '#eee' }}>Can you read me?!</div>
</div>

</SplitWithHeading>

---

## Custom properties as design tokens

- improved code reusabilty
- but still allow bad combinations
- require writing CSS
- hard to enforce their usage

---

<Secondary>

## What's the problem with HTML?

</Secondary>

---

<Stack gridGap={5} p={4} gridTemplateColumns="auto 1fr auto">
	<span>Text, Heading</span>
	<Code language="html">{`<h1>Heading</h1>
<p>Text</p>`}</Code>
	<span>Ô∏èüòä</span>
	<span>Link</span>
	<Code language="html">{`<a href="#">Link</a>`}</Code>
	<span>ü§î</span>
	<span>Button</span>
	<Code language="html">
		{`<button>Button</button>
<input type="button">Button</input>`}
	</Code>
	<span>üôÑ</span>
	<span>Dropdown</span>
	<Code language="html">{dropdown.html}</Code>
	<span>üò©</span>
</Stack>

---

<Image src="./assets/bootstrap-dropdown.png" size="contain" />

<ThatGuy />

---

<Boom>

> HTML was designed for documents, not applications!

</Boom>

---

<Secondary>

What should we do?

</Secondary>

---

<Boom>

# Stop writing HTML & CSS!

</Boom>

---

<Primary>

# Primitive components

</Primary>

---

<Image src="../assets/legos.jpg" />

---

<Boom>

> Primitives are the building blocks of your user interface.

</Boom>

---

<Image src="../assets/legos-assembled.jpg" />

---

## `<button> != <Button>`

<Appear>

## `<p> != <Text>`

## `<h1> != <Heading>`

</Appear>

---

<Boom>

> The way your component library is built will inevitably affect the quality of the application code.

</Boom>

---

## HTML vs Primitives

<Stack gridGap={4} gridTemplateColumns="1fr 1fr">

<Code language="html">{dropdown.html}</Code>

<Code language="javascript">{dropdown.jsx}</Code>

</Stack>

---

<SplitWithHeading>

## HTML vs Primitives

- üò≠ CSS acts as an API
- üò± HTML can be anything
- ü§Ø CSS = expect unexpected
- ü§¶‚Äç‚ôÇÔ∏è Reusability

* ü§´ CSS isn‚Äôt the API
* ‚ôøÔ∏è HTML isn‚Äôt the API
* ü§ù Strict contract via propsTypes
* üôå Reusability

</SplitWithHeading>

---

<Primary>

# Primitives for the layout & whitespace

</Primary>

---

### Building UIs with primitives & patterns

1. Get a ~~static mockup~~ wireframe from a designer
1. Get data from API endpoint
1. Assembly UI using primitives or re-use a pattern.
1. ...
1. Profit

---

<Image src="../assets/napkin.jpg" size="contain" />

---

<Image src="../assets/wireframe.jpg" size="contain" />

---
