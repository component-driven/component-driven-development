In this exercise we’ll create reusable primitive components. We’ll create a button, an input field, a custom select, a text component and a heading component. We’ll learn how to work with styled-components, how to do prop-based styling and how to access design tokens (values we’ve defined in the `theme.js` file in the previous exercise).

## 3.1. Introducing styled-components

If you’re not familiar with [styled-components](https://www.styled-components.com/), here’s the idea in five lines of code:

```js static
import styled from 'styled-components';

const Title = styled.h1`
  color: salmon;
`;

<Title>Hello components!</Title>;
```

The `Title` component will render an `h1` tag with an attached CSS that sets the color to `salmon`. Styles look almost identical to regular CSS, but instead of classes we have components.

You can also use object notation instead of tagged template literals:

```js static
import styled from 'styled-components';

const Title = styled('h1')({
  color: 'salmon'
});

<Title>Hello components!</Title>;
```

**Hint:** [A 5-minute intro to styled-components](https://medium.freecodecamp.org/a-5-minute-intro-to-styled-components-41f40eb7cd55).

### The result

The result should look like this:

```js noeditor
import Button from '../../components/primitives/Button';
<>
  <Button variant="primary">Primary</Button>{' '}
  <Button>Secondary</Button>{' '}
  <Button variant="primary" disabled>
    Disabled
  </Button>{' '}
  <Button disabled>Disabled</Button>
</>;
```

### The task

1. Rewrite a button component in `Button.js` using styled-components.

2. Define basic styles like padding, text and background colors according to [the mockup](https://cdds.netlify.com/), use primary button styles (like the “Place an order” button on the checkout page).

_Don’t try to be pixel perfect here, that’s not the goal of the exercise. Also exact values (like colors or font sizes) aren’t important at this stage — we’ll deal with that in the future exercises._

<details>
 <summary>Solution</summary>

```js {"file": "solutions/button1.js", "static": true}
```

</details>

## 3.2. Using design tokens

We’ve already created design tokens for our project and explored [the tokens](https://cdds.netlify.com/styleguide/#/Foundation) in the previous exercise.

styled-components makes it simple to use design tokens, thanks to [ThemeProvider](https://github.com/component-driven/component-driven-development/blob/master/src/ThemeProvider.js). You can access them in your component like this:

```js static
const Button = styled.button`
  background: ${props => props.theme.colors.primary};
`;
```

### The task

1. Replace all hardcoded values with design tokens.

**Bonus:** Add `body` font family, font size and border radius.

**Hint:** See [theme.js file](https://github.com/component-driven/component-driven-development/blob/master/src/theme.js) for all available tokens.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';

const Button = styled.button`
  padding: ${props => props.theme.space[3]} ${props =>
      props.theme.space[4]};
  color: ${props => props.theme.colors.bg};
  background: ${props => props.theme.colors.primary};
  border-radius: ${props => props.theme.radii.base};
  font-family: ${props => props.theme.fonts.body};
  font-size: ${props => props.theme.fontSizes.md};
  border: 0;
`;

/** @component */
export default Button;
```

</details>

## 3.3. Add hover and active styles

Use `&` to refer to a component class name, generated by styled-components, similar to Sass:

```js static
const Button = styled.button`
  background: salmon;
  &:hover {
    background: lightsalmon;
  }
`;
```

### The task

1. Add hover and active styles.

**Bonus 1:** Add focus style.

**Bonus 2:** Add disabled style. Make sure that a button doesn’t have a hover state when it’s disabled.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';

const Button = styled.button`
  /* Other styles */

  &:hover:enabled,
  &:active {
    background: ${props => props.theme.colors.hover};
    cursor: pointer;
  }

  &:focus {
    outline: 0;
    box-shadow: 0 0 0 2px ${props => props.theme.colors.focus};
  }

  &:disabled {
    opacity: 0.6;
    filter: saturate(60%);
  }
`;

/** @component */
export default Button;
```

</details>

## 3.4. Prop-based styling

Styles in styled-components [can depend on props](https://www.styled-components.com/docs/basics#adapting-based-on-props) you pass to your component:

```js static
const Title = styled.h1`
  font-size: ${props => (props.huge ? '4em' : '2em')};
`;

<Title huge>Hello components!</Title>;
```

### The task

1. Add a new variation of a button:

   - primary: current style;
   - secondary: no background, just a border.

2. Use props to change variations.

3. Render a secondary button by default.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';

const Button = styled.button`
  /* Other styles */
  color: ${props =>
    props.variant === 'primary'
      ? props.theme.colors.bg
      : props.theme.colors.primary};
  background-color: ${props =>
    props.variant === 'primary'
      ? props.theme.colors.primary
      : 'transparent'};
  border: 1px solid ${props => props.theme.colors.primary};
`;

Button.propTypes = {
  /** Button label */
  children: PropTypes.node,
  /** Button variation */
  variant: PropTypes.oneOf(['primary', 'secondary'])
};

Button.defaultProps = {
  variant: 'secondary'
};

/** @component */
export default Button;
```

</details>

## 3.5. Changing the HTML element used to render a component

Every styled component has a special prop `as` that allows you to change the HTML element used to render a component:

```jsx static
<Button as="a" href="/">
  Back to bright side
</Button>
```

### The task

Either by editing the `Button.md` file or directly in the Styleguidist interface, change one of the examples of the `Button` component to use an `<a>` tag instead of the default `<button>`.

## 3.6. Creating a basic heading component

Have a look at our [typography scale](https://cdds.netlify.com/styleguide/#/Foundation?id=typography):

```jsx noeditor
import Typography from '../../styleguide/Typography';
<Typography />;
```

We already know how to access design tokens in our styled components from the previous exercise.

## The result

The result should look like this:

```js noeditor
import Heading from '../../components/primitives/Heading';
<>
  <Heading size="xl" as="h1">
    Heading 1
  </Heading>
  <Heading size="lg" as="h2">
    Heading 2
  </Heading>
  <Heading size="md" as="h3">
    Heading 3
  </Heading>
</>;
```

## The task

Create a component that renders different levels of headings:

- `heading` font family;
- `normal` font weight;
- `base` color;
- font size is defined by a component prop (one of `md`, `lg`, `xl`);
- HTML element can be changed independently from the font size.

**Hint:** We need to change heading styles and an HTML element independently, because heading level [depends on the context](https://medium.com/@Heydon/managing-heading-levels-in-design-systems-18be9a746fa3), where the heading is placed in an app, and doesn’t always match the style. Use styled-components [`as` props](https://www.styled-components.com/docs/api#as-polymorphic-prop) to change an HTML element, used to render a component.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';
import PropTypes from 'prop-types';

const Heading = styled.h1`
  margin: 0;
  line-height: 1.2;
  font-weight: normal;
  font-family: ${props => props.theme.fonts.heading};
  font-size: ${props => props.theme.fontSizes[props.size]};
  color: ${props => props.theme.colors.base};
`;

Heading.propTypes = {
  /** Custom component or HTML tag */
  as: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),
  size: PropTypes.oneOf(['xl', 'lg', 'md']),
  children: PropTypes.node
};

/** @component */
export default Heading;
```

</details>

---

_Feel free to skip the exercise below or do them at home, since they don’t teach any new techniques but give you more practice with things you’ve learned in previous exercises._

## 3.7. Creating reusable input field component (bonus)

### The result

The result should look like this:

```js noeditor
import Input from '../../components/primitives/Input';
<Input value="" placeholder="I am an input" />;
```

### The task

1. Create an `Input` component, similar to the `Button` component, we’ve created in the previous tasks.

   - An input should support disabled state (`disabled` prop).

**Bonus 1:** Add focus style.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';

const Input = styled.input`
  box-sizing: border-box;
  display: block;
  margin: 0;
  height: 2.5rem;
  padding: ${props => props.theme.space[3]};
  border: 1px solid ${props => props.theme.colors.primary};
  border-radius: ${props => props.theme.radii.base};
  font-family: ${props => props.theme.fonts.body};
  font-size: ${props => props.theme.fontSizes.md};
  color: ${props => props.theme.colors.base};
  background-color: ${props => props.theme.colors.bg};

  &:focus {
    outline: 0;
    box-shadow: 0 0 0 2px ${props => props.theme.colors.focus};
  }

  &:disabled {
    opacity: 0.6;
    filter: saturate(60%);
  }
`;

/** @component */
export default Input;
```

</details>

## 3.8. Creating reusable custom select component (bonus)

### The result

The result should look like this:

```js noeditor
import Select from '../../components/primitives/Select';
<Select>
  <option value="1">Dachshund</option>
  <option value="2">Saluki</option>
  <option value="3">Sheltie</option>
  <option value="4">Border Collie</option>
</Select>;
```

### The task

1. Create a `Select` component, similar to the `Button` and `Input` components, we’ve created in the previous tasks.

- An select should support disabled state (`disabled` prop).

**Bonus 1:** Add focus style.

<details>
 <summary>Solution</summary>

```js static
import styled from 'styled-components';
import { getDownArrowIcon } from '../../components/primitives/Select/icons';

const Select = styled.select`
  appearance: none;
  user-select: none;
  width: ${props => props.fullWidth && '100%'};
  height: 2.5rem;
  padding-top: ${props => props.theme.space[3]};
  padding-right: ${props => props.theme.space[5]};
  padding-bottom: ${props => props.theme.space[3]};
  padding-left: ${props => props.theme.space[3]};
  border: 1px solid ${props => props.theme.colors.primary};
  border-radius: ${props => props.theme.radii.base};
  font-family: ${props => props.theme.fonts.body};
  font-size: ${props => props.theme.fontSizes.md};
  color: ${props => props.theme.colors.base};
  background-color: ${props => props.theme.colors.bg};

  /* Down arrow icon */
  background-image: ${props =>
    getDownArrowIcon(props.theme.colors.secondary)};
  background-position: center right ${props => props.theme.space[3]};
  background-repeat: no-repeat;

  &:hover:enabled,
  &:active:enabled,
  &:focus {
    outline: 0;
    box-shadow: 0 0 0 2px ${props => props.theme.colors.focus};
    cursor: pointer;
  }

  &:disabled {
    opacity: 0.6;
    filter: saturate(60%);
  }
`;

/** @component */
export default Select;
```

</details>

## 3.9. Creating a generic text component (bonus)

Now we know enough to create customizable components that use many theme values.

## The result

The result should look like this:

```js noeditor
import Text from '../../components/primitives/Text';
<>
  <Text>Normal text</Text>
  <Text variant="secondary">Secondary text</Text>
  <Text variant="tertiary">Tertiary text</Text>
  <Text variant="error">Error text</Text>
</>;
```

## The task

Create a component that renders text in different styles:

- Normal text (`base` font size, `base` color);
- Secondary text (`base` font size, `secondary` color);
- Small text (small (`s`) font size, `secondary` color);
- Error message (`base` font size, `error` color).

The `variant` prop is used to change text style.

<details>
 <summary>Solution</summary>

```jsx static
import styled from 'styled-components';

const getFontSize = variant =>
  ({
    base: 'm',
    secondary: 'm',
    tertiary: 's',
    error: 'm'
  }[variant]);
const getColor = variant =>
  ({
    base: 'base',
    secondary: 'secondary',
    tertiary: 'secondary',
    error: 'error'
  }[variant]);

const Text = styled.p`
  margin: 0;
  line-height: ${props => props.theme.lineHeights.base};
  font-family: ${props => props.theme.fonts.body};
  font-size: ${props =>
    props.theme.fontSizes[getFontSize(props.variant)]};
  color: ${props => props.theme.colors[getColor(props.variant)]};
`;

Text.propTypes = {
  /** Custom component or HTML tag */
  as: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),
  /** Variation */
  variant: PropTypes.oneOf([
    'base',
    'secondary',
    'tertiary',
    'error'
  ]),
  children: PropTypes.node
};

Text.defaultProps = {
  variant: 'base'
};

/** @component */
export default Text;
```

</details>
